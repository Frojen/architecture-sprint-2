[Схема с заданием 1, 5 и 6 в формате drawio](Cпринт_2_задание_1_5_6.drawio)

[Ссылка на схему в draw.io](https://viewer.diagrams.net/?tags=%7B%7D&lightbox=1&highlight=0000ff&edit=_blank&layers=1&nav=1&title=%D0%A1%D0%BF%D1%80%D0%B8%D0%BD%D1%82%202.drawio&page-id=9lPGV6f6OgtZQJTpUdHp#R%3Cmxfile%3E%3Cdiagram%20name%3D%22%D0%97%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%201%22%20id%3D%22q0yI837xFGUjmYYNmQKo%22%3E7V1bk5s2FP41nmkf0kESEvC43kuaadKks51J8tRhbdYmwcbF7MX99RUX2SDJa2yDEYKZxGtkIQHnOxedc3QYoevF6%2FvIXc0%2FhVMvGEFjFvnTEboZQQjof9qwcmdeqSHpce%2F%2FxxqNvPXJn3rrUsc4DIPYX5UbJ%2BFy6U3iUpsbReFLudtjGIiXcT9xA09o%2FepP43nWakNr1%2F6758%2FmbCJAnOyXhcs65xe%2BnrvT8KXQhG5HkIwgenVHaDxK2sr%2F0HUUhvHBbqzz4vXaC5Iny55rNu%2Fd6QNs7z3ylnFNY2LwIfoDf7n%2B9uGfzXLz%2Futfn27%2BfGdmEz27wVP%2B2PNHFm8YHaLwaTn1kkHosOOXuR979yt3kvz6QmFF2%2BbxIqBHgH599IPgOgzCKD0XTV3PfpzQ9nUchT%2B9wi9kYnsPj%2BktpBfgRbH3uvfmQRWq8ff%2F3gsXXhxt6PFrGcmb7BCi%2FPilgC8jb5sXsIUYktwcwrPt0EfRhPbNyVIvFVGfqQgqEhEaahPRFmjmTalAzA%2FDKJ6Hs3DpBre71nGZqrs%2BH8NwldPyhxfHm1yYu09xWKY0pU20%2BZac%2Fxtmh9%2Fz4dKDm9fS0SY%2Fyq41ucC3qU3vJ3yKJnmvv3zy4xlezz%2BS8QJbM%2Bh9tn4wERS70cyL33g%2B1pnoibzAjf3n8gUrigWA2gDDmtIgvko0NW2YBO567U%2F%2BnvtL9tOdH7CuLdAfVFLddQDgmDnYTPSxuZvCeKvQX8br00bbXf2XZJSd5MNMhOWiDznHWQUnTWKi0ydJOSR7NMcRLmWsLe0uyI5vQbSgXymvxV70hpYFh7XsJXUmVYll5GBD0JoAGqLWJIbSgpK0ISdrFH5YFH77Eaif8nvrmRS4bbVZhMtZ%2BM5d%2Bd1hOcALa01YDhxebMwoUVajojPAfWC%2FGRcVe1aZBpZIgu3jLpLAVoYEUg4RSfAp4Y%2BbsUCJ9dxdJV8nm8CnbBKhwzzykDHUx4dtgzv5OUvZ7PNTTIfxmLmYyUeAqzLWfjjVQGlDJG0HKQtbln2NkGj%2FQl1x%2BSclUStLM%2B%2FVj78Vvn%2FfLdnp0W6RnhywNfpubV9a2e8W%2BnvW9unRFy%2Fy6VP3ouoL%2Fre0xUFDCFY0hM7FoqKGkPTZicJgRGnh2CMKAxuknzhpGd%2Bmn2b6eVNowclsyZe7tHP23U4%2Fx4VuJO%2B8O91mp3NIp6IjLgPTDfzZMlEwFAYJWMaJgPEnbnCV%2F7Dwp9OUB2TiqSzAtn76BHCP4TLO2QEidpxfCdN%2FzdoQ%2B8UWkvkXTUdpMIlWNWDoSGE1NgSMGAwRtD0595f0my30Ntk525bb8rg8rn7tN7CqRyO2gYcOAc0SgEbXAI%2F%2B7D56voAB05C%2FxCQicRQ3XuTq2GzFemGWyPagmiVSweiQ2BfSG3dE%2B6LdKIOyTmaLwZr5LXJlV6uTmZ%2FEPMOT3T0n81sILchNqraiKRAYVqk1fU3ylnDOMiiRt2ov59%2BIWYlEFV1mfSAqC1d1nagiSyqsQ6WreW85ZXHeZZjgJGnJw7s1K16rouIdwru1KsXqk%2FQqvCuHniiOL5p6M6qYeIPhjtt5jlY7d8PpPW8LqRtWA7wtTJLnEfWZt0W%2Fl8Ds%2BuZGYknAU5ociVX3WxCBjMnhCe5Lo%2BDsviu4wrNzrgpjkYJb825wWVaEF3Qk8FLcZcn2FOiceyu%2F8apuMQQvpcFVgEMrqdhHWHCnRnZbQc5g%2B5nQLIlN2zTqt%2F34SZwzJjnR9tt7bdgqX5vFe3gyFOVnHX3RqtmcUHTldi5fGHOQlaRXdTH%2BxWKsXUgYlt8A23l5SO7Ci8ldFcgqZkR2MmfYcrTkOrMVrjvdY34x5ziCgxW19%2Bp5xzWXkgGMvKFe9zg3i01wA5OYZm2TaOKnMzsVVDtqraagNLEHadKKNCF2E9IEmbVNook0YZzQ8SREbhEGDE22kKGW%2Fa2NCfsahXl1B9sgzAUHG2xAlvOTWEYDstx06pukaS8eIUk%2BgsZ%2BPGQLWuQ85VGMHefG4CX1CQ8uItnaAtlavUulc5DocO00obAhDxh0nlCmaJfR4YMkjj71n0sEI%2F8%2BJSXYxqVvs%2FxvesZ65S6lp%2BzyYN9NMiJeJRe29GPfDaRDskzrbGB699nY5floc3qRrJUDWJ4PcABZQo7ARXFll3GFbVvAlSwhFymOKln9M1VQBXuHKhtogSq21lI2C6DGxQbzRx5cbJi494sNwiln0kSWtjAJ7r1PB7fiIVadH8nAjxyrsA0OjfKjNfAjw6iwYdEtGV%2BZXRN5q8CfuBWNHh03w2HAe0%2FMSlaS4pvhTDG%2FPkPBw2EUPERHGsM64oLw0Ru2Y6HbuMCiB0YtbV2Iy5Y77sKzdSt1opyRrQBQ2FMRBMhkECAnCRCLOT87LkD0LIEt54Gqm6TNIdZHjHKOpAONJsx9LhFzSKkwxbpOmX%2Bzgrk%2FyOnkqUJUxpSjxwJADJJmuBgWANVwwetv29RiAWCKMdkMF4NddxouHLak6jYuWE5ba3ttDXoz5fwvC40O7Qhoo%2BLGmabisGNAMBXzkF6jpqLj2H03FbFYOFjh7fTnMncLjiRbORmggmIRHUkCDPWt9AKAJDe8k6VesLjQRMn5R5Z62RZzwYWq1UON6gZQhoAEZYpXfME9eNui%2FIVZRkXdQfoUhMBOG3DoVsWX6sgZnNT8XhFgQqP%2BpYcwCz5jlqZ3iwDE2x16bRZhd6dR0ReAmC%2Bp4%2FsNSSupg3XKXlhV9ho90trsqWhW9UUftmvnVWnql30hkte%2BDqYUlNoRQqEGkqO%2B0UINwDQvUPflrFk0cRaTduNBWhR%2BqS5PhtcbtSRPYCN1pLgQ8Vmz6CJPxIR0HUq%2FEMnbATtpE5JWxf2R7rN2YvzVPW2DOBc9bU28rk6YBTZRyIuvz3HWLI378%2BhD0bv8CxEDkecpEMXKvwAgeR9bJ8uKEM0K9fD1X7bhg%2B5TSlapR5VSHf0rAAMA0aJWB3sPjZKwgv2DFXL0gFWPSk5YqOKiI7MDe73o4KtBANjE2%2FzEWVDvvTuWaNgNHGmRgSN5XmnkrfXiLANHWmLxvaEMjITH9pSBAZDFBLu9rYt5h4Y6MCcCg9%2FuB4CjxT5Qq5XNQErv37GIcqa2CkAR9%2B8MhWDOkiDIgFpIkFbeFtGSzV91a581bO%2Fld94C3IzNz81iDjkW1r6aH0MtmANct6cWDDAtPVYB%2B4p%2BDKuAasAQdLgJtVgFsMsbqsHUBQzM3nHWcWC0%2B97HrpeDqWwvZjAY7MUyCxkXsBex1fuCMHYrUZv%2BFIRhZpdCUkAF1dLKzpJ29IBdNVaY7ZnsCwLE2FTkTf11LyxGwCsiCBW1GNO%2BUZhkTu3tyVQapcP8Uzj1klH%2FBw%3D%3D%3C%2Fdiagram%3E%3Cdiagram%20id%3D%22OLdN4NGgFrXWPMUnjLi8%22%20name%3D%22%D0%97%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%205%22%3E7Rzbcps49Gs8031wBiTA8Ojc2u5m22aTzqZ96cgg22oxeIEkdr9%2BJUtgCxFfwkV2p3lwJHEkpHOXdA49eDFbvE3QfPp3HOCwB4xg0YOXPQCAbTn0H2tZ8hbTZFXWMklIINrWDXfkJxaNhmh9JAFOJcAsjsOMzOVGP44i7GdSG0qS%2BFkGG8eh%2FNY5mmCl4c5Hodr6LwmyKW91wWDd%2Fg6TyTR%2Fs%2Bl4%2FMkM5cBiJekUBfHzRhO86sGLJI4zXpotLnDIsJfjhfe7fuFpMbEER9k%2BHb4k3x7g9cy7dQf4frn4iMJLqy9GeULho1iwmGy2zDGQxI9RgNkgRg%2BeP09Jhu%2FmyGdPnynRads0m4W0ZtLimIThRRzGyaovDBB2xz5tT7Mk%2FoE3nji%2Bi0dj%2BkRMACcZXry4MrPAF%2BU0HM9wliwpiOjQtwYCx8uc73j1eU0xzxYUm25Qy3ZEPyS4ZFKMvUYkLQhcHoBXxzkEseZhiI3iCDeEOWDLmDMHjoI6mHPwJupMozXUDU4TdcCDulEHFMzd4eSJULwA45KkfkxXzJbQo6J87uYFc%2FXLy%2Bcb5cseRZ9rCmBW5u1Xq1%2Bw%2Bh0KeDbUChgYw0%2Fv6e9blOFntFQoRxGeyeRBIZlEtOxTxGNKo3NGFkI18FA8mJEgYN0r6SxzQqFjmaoax1EmDAqAeV3MxGyCA%2FZQO7ZbwQCWV5%2F%2B18Gnzw%2Fuzz%2FJ5w%2FT9Pb75Vvv%2FU0fKujGAbVmohon2TSexBEKr9at57J6X8PcxPFcYPU7zrKlwCR6zGKZfjgKhszQMhKGKE2Jfz8lEX9wTcIcLM1QklUDrh5tgAYonRYk5Uti69hOJrrs%2BDHx8RbxGFSTM8EhysiTPH4VbUTXTzGhb16zgWnKbABtKI9BlzfBmei2JjFFBhOQAmzOANJtLzJK%2FAahbPF3dchntuYxPoc1xxVoeb0SUtX3fDmLo0ncR3NST5M3orZhyeJ5qtSaVWq7NV%2FB1SO1dOoPm5UvbLAzO69eLsTgvLYsaoW0C1u6FnOjRdnNZYzL0jZA2ISUHyqbVu5eCq6yob1VNMvwsOy8l%2BHzGVfDtyPJ3ikx5gH25fh5GJwiD5vWDh42zW3wLVkjdfPQJRMbp8XEzTtH%2BXFIiaeKIbjQKL7RzoGgBdpxslyjcsIvzsstu1g74MvrkOHbEYJc8Wz4ZH4cjcnkLnnS75GVWcTo0CGr3EYN9KiM7fLcpB1qxLworO2VdifAPjM2%2FkrjNSSvpZeaThfipJ6z1JOidk6ozIFsbx1VroBVIVegifOpSsHStNNpRrDalhdo7SchyjimW9obeMaZt%2Fm3l8WtKXjQMzsQPHgaglciCKg4YmhP8qoxZ1VgzgnZUWxAniQMOv89siupc6k0Ef9XPdI5iiq7jJD%2FY7IiQN%2FnWB2yiUUkIyisHDKdoiQw84Hp0vjY8vto82qSeWv1kfIOUivHzA0QGjgyoS31BsCpIDNsjcr2EVMZ%2FCpUBgPdZHZ02NED9qb7mtR9fFXhM%2Bw%2BM%2FGaMNKHWkHgls80tm%2F%2FFHizgzMQU8uG5sj5pRmnrja%2FDA7jF9AJv7iKGeF2GknWhCvqBM9D4qM9tTgdZ86K%2FjIklL0SuFuljzgj3oyKhsL%2BfHzM6DA4ZzjOiabdkBfnlUXV20vtu62pfe8Fsox2k2WUHGhuT4hQsHSunN%2FK66JTEfB1rOp2zxv7BrVyEbrXuhWvRzk1HI5LmP9bwmSrNdAsYuq%2B%2F7hErEnZgft6NJYej8aReAPu9GhK8F3cAgL14IjvSffwaH5lwQblACFLs48D1HMqTqjfPo5MKEO3k6MeNXFC%2FTaVEqEsQ7ep1HJYtA6AODPoDOQgiAHs7Qoyo7VPOCEUBewU79DYCC3W1z4G62sZh1lfq4uIUKDpQr1gQVtiwJaZT8PuyuqKR2vd%2Fmrx2Te4wPNcWRE57mtYQVf0IPD2pLJj1KTy6wKnysHmOyOntESnA%2FUQLcEBSU%2FZ5%2BiX3Xir4sK5Lafjw92FCfrpV%2BMh%2B8u7j25u519v87TCbkW9QVnLkbVb1upGm9dLlVPj%2Bo461wLmkVPaci0c9YSPYoUpd%2B3IKoVBmhXphB3jSk%2B41oJkDxvljcBpWlsbalapFza9zTuT3IZBaf9ivcZtaFI77bsncdoJXHNkqS7yHtsN7cwjvl%2FyJ9Tw00a9idB8GA2Nb7fv4YMD%2Fxkvp%2BDc1mPnXptccJoZA3mAfO2MAQBaSss8NAOgBL8zi7O8DtiBm%2ByoB%2BZHaic79Skq97V60%2BQOVAKvM0OV67b3tEJ1065rEcfUchmvAcu1d%2F310KzFEjZw1LIvzivhHJ0oVy9gtn95o3NFbZU%2FkGK7mjV1biqOQ1UPdunqttjb6UqlvM6fKu8voMhgedFBUjqIxOSmPKRqXtL0sZUT5aVGvr3SPSuBhqNTtuGwImvjxRyMjcSLZDJCb%2Bgs6buN0r8z1%2F5jRW6DffuoP0YzEi55LzoUmjGlLwb8ckcb71mORekBH2qYsNyOVfEdDp9wtrrOZ9UURWk%2FxQnhH3MzWJ5GX6RhDFdzRwkfx1jZnH7KjA7LHAnRPMUcaJ5gOgRjAwZXnWBC1%2FkGsL0Ve%2BtmgS%2FxpTQWtvJKFK5Qwk%2Fi2fAmmC8qB6r8hFYRtsCHV6IZ5ASXY7PEMN9DdWGJKy8I9Bri0qdFLKc44WvyIlBPwEJ%2Bwq1rW0ar629acg25%2FjQovPof%3C%2Fdiagram%3E%3Cdiagram%20id%3D%229lPGV6f6OgtZQJTpUdHp%22%20name%3D%22%D0%97%D0%B0%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5%206%22%3E7R3bkps29Gs8kz7YAxI3P%2B41aSZt0tl0mn3qyKC1STA4gHfX%2FfpKCDCSsME2IDuzefAiIR2kc9fhHDKCN8vX9zFaLf6IPByMgOa9juDtCABgGhb5Q3s2rEfXaZP2zGPfy%2Fu2HQ%2F%2Bfzjv1PLete%2FhhBuYRlGQ%2Biu%2B043CELsp14fiOHrhhz1FAf%2FUFZpjqePBRYHc%2B4%2FvpQvW6wB72%2F8B%2B%2FNF8WTdmrI7S1QMzneSLJAXvVS64N0I3sRRlLKr5esNDij2Crywefc77pYLi3GYtpkQzR%2F%2F%2Fj7Tl%2F%2F%2BdfUTfx673seP9%2BMcyjMK1vmG88WmmwIDcbQOPUyBaCN4%2FbLwU%2FywQi69%2B0KITvoW6TIgLZ1cPvlBcBMFUZzNhR7CzpNL%2BpM0jn7gyh3LdfDsidzJF4DjFL%2Fu3Jle4otwGo6WOI03ZEg%2BYWxrOY43Bd%2Bx5suWYrru5CRbVMhlWvlElLPJvAS%2BxSS5yJF5AGLBIYjVD0NsGIW4I8wBk8ecblsS6mDBwVXM6VpfmIOXiTkwhaoxZ0iYu7n9U0Ie2XPKYwgF%2Fjwk1y7ZOyZouqaY8YkOvMpvLH3Po9NrUc0To9RyVFk8RWGaq3QAi3a%2BEr0LIrQQfKeGBMa0JwqYEraxR8xJ3ozidBHNoxAFd9vea16%2Fbsd8iqJVjtTvOE03OSLROo148uHQu6KWjlIwQEniu18Xfshu3PtBMSxJUZzWD8xuVYZ6KFmUFGVbovvYTyWy7Wgdu3gPeqx6asY4QKn%2FzMOvo00%2B9UvkkydvuUDXeS6AJuRhkO3NcZpP25KYIANtKsNWdECy70Eiu0HIm9ymCcXKtjzG1rDluBItxzOhJamB1WYZhfNojFb%2Babq0E8UJBZMzrbHWdYqzN1ttq5FasvRv1cYjBTYxi%2Bbtaw6ctTZlq5T23JptxVzrUXYLGWOytG%2Bg0YWUHyqbhmlzXGVCc69oiuOh6D2L44sV14%2FvR5KdS2LMA%2BzL%2BfMwuEQe1o0GHtb1feP74eGpUh7WLouHu%2FeNinCEwFIlCCYzkmvUCAgaoB8fy9FqF7xzXY7oYTWMF%2FfBj%2B9HBgq9U3HJ3Ch88ucP8bN6h0xkEU21P1aoKWXHqFqB7tIOdWJeJN6eCqcTYE60yj8BXkcCKzxUt4aQp8uIruk2b28tWbCAUSNYoLcIkQ4vWbL6FhhotBMRCY7uCIeDqTaZVv%2B1srknSh6c6gNInhxjPEvJEwgCamIMQ4ueWYM5K6ChWM9%2F5jBo%2FVzTl0LX3NU8%2F5vNSFYorJ0yQ%2B6PeUaAscuwekUXFvqpj4JakMkCxZ5eACZbY7D555HubJFFb31IuYHUUpi5A0IDiye0IQfhrRoyw96oLAffzofK4FehMrBVk1lJyPCA02lbk9rGWc2tV2PQpPJWe8CgCRBUvW7sPwBK4%2FUBgiC6kkjeufOLkiCbRH%2F7MH4Bg%2FDLVDIjzE4jzpowRR3jVeC7qKUWJ3BW9NLdBD5hrxg2q%2FQZY8RPs7KjtD%2Bf1ykBgwuGY5yomx15cVNRVKet1L7Tl9oHchyHkWXWTJZZfKC5vSBCQSGwbGuK6aQkgHRc8HjfK%2FsOtXJxTuvfip9GOTmywyTMfZMw3mrZikVMSSRJjUcDjLayY6rxaCyON2CjRyOMH%2BI1IJADR%2BxM2sKj%2BZUFG4gZQoZqH0eOUzFCvfk4PKE01U6OHGpihHozlRyhDE21qVSbX6ZNNMIqfBqEDUdNWWak9QXHPkEBjeIdmh2hxPp2kl56qvU1tMOsrzFESihQm0lWSbx55NitH%2BZTcLoyh%2BLR0zSR4mSsyXTq8JrIco7hBVX5g8X7hEYyQyWhTSndvDF5Skl%2BOpSjaDH2%2FOSSnY6x6McbNW%2BcB%2FU6oJIYWJfC1jZiBZXq1GKZl1JuAYvkKWXpfVCu8CNYodpdObKEVEi9pqZvYFwZSiz2q59%2Bq1xXkqdJa2upaeO01Ol9%2FhnnN9jCCcY4xm%2FoUjtZbbUT7MIVkEy3xUt1WfnYb3ZnkfW9y6GQM1AHcCcUFV0eV2FwmWUDRZb8yWUDAPRUmnloGYAwvrGSU9wHHMJRliN8Z2ooz8CpUBxkO0wLdGiIjLZnUrVespIAlAo0n3z0Pw3PSiI8fcVbWiPdONXJOu27G3JA4%2BrL76TjPUrxC9qoV9eG%2BLES01Gsrw0l4Yld%2BtpuUti9cTgcSq0c51aJ5wyY17Ls9JOkCXmNcq%2BOUlGL%2BsZMw7gCingJDJGoYsjRqcZ6jEoRRjyfoXdkmeThmvBn4pi%2FZQTX6HeQxk9o6QcbNouAQkuq93OAjw%2Bk8yuttxBuMFBXMa3zyC4%2F4OAZp9mrfdpMUJiMExz77NNqGq3ZGOclGVfZ2lHM4GiZ2Rkn1O7QKpIArRLMBq1iTEBQPqDj6otNyD7fAXrIok%2BtXrAt7ippoTuvRWGGEhaUp%2BB1sHqtBfRAFuYTKQDarZ%2B4ETGLm0oKAwMvZTbwxS7nZoxhcZhSZ4zVRBl3fGjEsMpgX5cvBdVkL8ChdPJpDKDk2NCl6WsbjjWUpjcXkn8heRj5awBtokPuTYBt730VQBs9ht5N0JbWdhd%2BjuyXmGKwUXyJ21VQ0wL8gwwNCCzYhwMkRx3vY2JXiTZVbzst4%2BwOsraEruyrm1KiJcEB4RMiDNdm9guzXyf7vct%2Bb6njcwY4FtjbAMr9E6dTHMunxeFxLHyyUv1Hd0zFAZmJOQW8H6jpx%2FmBpdVyOKPlXIbNcrqwWQdbGrMIHJeWxujf0hRIafhgMYHkZ2fT6zIhLIjWnhqDUxTLNApqb4ldpqJv%2BOzwIYlveFQOZ4fC1dr5N08Nou4g3Ih6SMV3%2FJl0bP87BHj3Pw%3D%3D%3C%2Fdiagram%3E%3C%2Fmxfile%3E)

# pymongo-api

## Как запустить

Перейти в папку [sharding-repl-cache](sharding-repl-cache)

Запустить mongodb, redis и приложение

```shell
docker compose up -d
```

Инициализировать шарды и реплики

```shell
./scripts/shard-repl-init.sh
```

Заполнить тестовыми данными

```shell
./scripts/fill-data.sh
```


## Как проверить

Статус сервисов
```shell
docker compose ps
```

Общее количество документов по шардам

```shell
./scripts/test-shard.sh
```

Общее количество документов по репликам

```shell
./scripts/test-repl.sh
```

Общее количество документов

```shell
curl http://localhost:8080/helloDoc/count
```

Время выполнения первого и второго запроса к эндпоинту /helloDoc/users

```shell
./scripts/test-cache.sh
```

Общая информация по конфигурации

```shell
curl http://localhost:8080/
```

## Доступные эндпоинты

Список доступных эндпоинтов, swagger http://127.0.0.1:8080/docs